# 用户规则

本文档定义了在使用 Trae IDE 时应遵循的全局规则，旨在确保代码、文档和提交信息的一致性与高质量。所有规则对项目全体成员生效。

---

## 1. 中文文案排版规范

所有代码注释、文档和用户界面文本都必须遵循以下中文排版规则。

### 1.1. 空格使用

1. **中文与英文之间需要添加空格**
    - ✅ 正确：`在 GitHub 上开发程序`
    - ❌ 错误：`在GitHub上开发程序`

2. **中文与数字之间需要添加空格**
    - ✅ 正确：`我家的光纤入户宽带有 10 Gbps`
    - ❌ 错误：`我家的光纤入户宽带有10Gbps`

3. **数字与单位之间需要添加空格**
    - ✅ 正确：`SSD 一共有 20 TB`
    - ❌ 错误：`SSD 一共有20TB`

4. **英文和半角数字与全角标点之间不加空格**
    - ✅ 正确：`我家的光纤入户宽带有 10 Gbps，SSD 一共有 20 TB。`
    - ❌ 错误：`我家的光纤入户宽带有 10 Gbps ，SSD 一共有 20 TB 。`

### 1.2. 标点符号

1. **中文句子中使用全角标点**
    - ✅ 正确：`这是一个中文句子。`
    - ❌ 错误：`这是一个中文句子.`

2. **英文句子中使用半角标点**
    - ✅ 正确：`This is an English sentence.`
    - ❌ 错误：`This is an English sentence。`

3. **数字使用半角字符**
    - ✅ 正确：`我家的光纤入户宽带有 10 Gbps`
    - ❌ 错误：`我家的光纤入户宽带有１０ Ｇbps`

### 1.3. 用户界面文字

- 提示文字无需标点符号：`请输入用户名`
- 完整句子使用句号「。」
- 避免使用感叹号「!」

### 1.4. 参考资料

以上规则参考自 [中文文案风格指南](https://github.com/nesnilnehc/copywriting-guidelines)。

---

## 2. Markdown 格式规范

所有 Markdown 文件（`.md`）必须遵循以下格式规范，以保证文档的统一性和可读性。

### 2.1. MD009: 尾随空格

根据 Markdown 最佳实践，行末不应存在多余的空格，除非它们有特定用途。

#### 规则说明

当 Markdown 文件中出现不必要的尾随空格时，会触发此规则违规：

```markdown
这行文本有尾随空格  
另一行文本也有尾随空格   
```

#### 正确格式

为修复此类违规，请移除行末不必要的空格：

```markdown
这行文本没有尾随空格
这行也没有尾随空格
```

如需强制换行，可使用恰好两个空格：

```markdown
这行末尾有两个空格表示强制换行  
这会在渲染时创建一个 <br> 元素
```

#### 原因

除了用于创建换行外，尾随空格没有实际用途，并且不会影响内容的渲染。清除不必要的尾随空格有助于保持代码的整洁和一致性。

### 2.2. MD031: 围栏代码块前后空行

根据 Markdown 最佳实践，围栏代码块（Fenced Code Blocks）前后应该有空行。

#### 规则说明

当围栏代码块前后没有空行时，会触发此规则违规。

#### 正确格式

为修复此类违规，请确保所有围栏代码块前后都有空行（除非代码块位于文档的开头或结尾）。

```markdown
一些文本

```
代码块
一些代码
```

一些其他文本
```

#### 原因

除了美观原因外，某些解析器如果代码块前后没有空行，将无法正确解析围栏代码块，这可能导致渲染错误和内容显示问题。

### 2.3. MD032: 列表前后必须有空行

根据 Markdown 最佳实践，所有列表（有序和无序）前后都应该有空行。

#### 规则说明

当列表（任何类型）前后没有空行时，会触发此规则违规。

#### 正确格式

为修复此类违规，请确保所有列表前后都有空行。

```markdown
一些文本

* 列表项
* 列表项

一些其他文本
```

#### 原因

某些解析器如果列表前后没有空行，将无法正确解析列表，可能导致渲染错误。

---

## 3. 代码重构规范

### 3.1. 引用管理协议

在进行任何代码修改（包括新增、删除、重命名文件或类）后，**必须立即检查并同步更新所有相关的 `using`、`import` 或其他形式的模块引用**。

#### 工作流程

1. **修改代码**: 执行主要的代码更改，例如重命名类、移动文件或修改命名空间。
2. **同步更新引用**:
    - **新增**: 如果添加了新的依赖，请在文件顶部添加相应的引用语句。
    - **删除**: 如果移除了某个类的所有引用，请删除不再需要的引用语句。
    - **修改**: 如果重命名或移动了文件/类，请立即更新所有引用该文件/类的语句。
    - **排序**: 在新增、删除或修改引用后，**请按照项目规范对引用进行分组和排序**。推荐的顺序如下：
        1. **标准库**: 语言或框架自带的库（如 `System`、`java.util`、`React`）。
        2. **第三方库**: 通过包管理器安装的外部依赖（如 `Newtonsoft.Json`、`Serilog`、`lodash`）。
        3. **本地/项目内引用**: 项目内部的其他模块或文件。
3. **执行验证**: 在代码和引用都更新完成后，再执行**编译、构建或代码检查**来验证更改的正确性。

#### 目的

遵循此协议可以**最大限度地减少因引用错误导致的编译/运行失败**，从而避免不必要的迭代和调试，显著提高重构效率，并保持代码库的整洁。
